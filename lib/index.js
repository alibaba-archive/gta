!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Gta",[],t):"object"==typeof exports?exports.Gta=t():e.Gta=t()}(self,(function(){return(()=>{"use strict";var e={947:(e,t,r)=>{r.d(t,{default:()=>y});var n=r(705),o=r(773),i=r(593),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(){function e(e,t,r){void 0===t&&(t=5184e6),this.key=e,this.expires=t,this.cache={};var n=document.cookie.match(new RegExp(e+"=(.*?)(;|$)"));if(n)try{this.cache=JSON.parse(decodeURIComponent(n[1]))}catch(e){}this.domain=this.savedDomain||this.defaultDomain,this.setDomain(r||this.domain)}return e.prototype.set=function(e,t){this.cache[e]=t,this.commit()},e.prototype.get=function(e){return this.cache[e]},e.prototype.delete=function(e){delete this.cache[e],this.commit()},e.prototype.getDomain=function(){return this.domain},e.prototype.setDomain=function(e){var t;this.cache[i.CookieAbbr.preference]=a(a({},this.cache[i.CookieAbbr.preference]),((t={})[i.CookieAbbr.cookieDomain]=e,t)),this.domain!==e&&(this.destroy({flushCache:!1}),this.domain=e,this.commit())},Object.defineProperty(e.prototype,"savedDomain",{get:function(){var e,t,r=null===(t=null===(e=this.cache)||void 0===e?void 0:e[i.CookieAbbr.preference])||void 0===t?void 0:t[i.CookieAbbr.cookieDomain];return r&&"string"==typeof r?r:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultDomain",{get:function(){var e,t=location.hostname||"",r=null===(e=/[a-z0-9-]+\.[a-z0-9-]+$/i.exec(t))||void 0===e?void 0:e[0];return r?"."+r:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookieDomain",{get:function(){return this.domain?"domain="+this.domain+";":""},enumerable:!1,configurable:!0}),e.prototype.commit=function(){var e=encodeURIComponent(JSON.stringify(this.cache)),t=new Date(Date.now()+this.expires).toUTCString();document.cookie=this.key+"="+e+";expires="+t+";"+this.cookieDomain+"path=/"},e.prototype.destroy=function(e){var t;(null===(t=null==e?void 0:e.flushCache)||void 0===t||t)&&(this.cache={}),document.cookie=this.key+"=DELETED;expires=Thu, 01 Jan 1970 00:00:00 UTC;"+this.cookieDomain+"path=/"},e}(),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c="superproperty",l=function(){function e(e){var t,r=this;this.gta=e,this.name=c,this.runtimeProperties={},this.registerProperty=function(e,t){return r.runtimeProperties[e]=t,r},this.unregisterProperty=function(e){return delete r.runtimeProperties[e],r},this.registerPersistentProperty=function(e,t){r.persistentProperties[e]=t,r.gta.storage.set(i.CookieAbbr.userProperty,r.persistentProperties)},this.unregisterPersistentProperty=function(e){delete r.persistentProperties[e],r.gta.storage.set(i.CookieAbbr.userProperty,r.persistentProperties)},this.setCurrentPage=function(e){r.registerProperty("page",e)},e.setCurrentPage=this.setCurrentPage,e.registerProperty=this.registerProperty,e.unregisterProperty=this.unregisterProperty,e.registerPersistentProperty=this.registerPersistentProperty,e.unregisterPersistentProperty=this.unregisterPersistentProperty,this.persistentProperties=null!==(t=e.storage.get(i.CookieAbbr.userProperty))&&void 0!==t?t:{}}return e.prototype.onGTAEvent=function(e){return u(u(u({},this.persistentProperties),this.runtimeProperties),e)},e.pluginName=c,e}(),p=r(593).DBGCALL,f="duration",h=function(){function e(e){var t=this;this.gta=e,this.name=f,this.startTimeMap=new Map,this.durationStart=function(e){t.startTimeMap.set(e,Date.now())},this.durationEnd=function(e){var r;if(t.startTimeMap.has(e)){var n=Date.now()-t.startTimeMap.get(e);t.startTimeMap.delete(e),p("time on "+e+" : "+n),t.gta.event(((r={gmkey:"EXP"})[e]=n,r))}else console.warn(e+" need use durationStart function")},this.gta.durationStart=this.durationStart,this.gta.durationEnd=this.durationEnd,window.addEventListener("unload",(function(){t.startTimeMap.forEach((function(e,r){t.durationEnd(r)}))}))}return e.pluginName=f,e}(),d=r(593).DBGCALL,g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v="2.0.0-alpha.9";const y=new(function(){function e(){this.version=v,this.dryRun=!1,this.initialized=!1,this.plugins=[],this.providers=[],this.options=null,this.storage=new s("TB_GTA",15552e6),this.registerPlugin(l,null),this.registerPlugin(h,null)}return Object.defineProperty(e.prototype,"debug",{get:function(){return i.DEBUG_FLAG},set:function(e){(0,i.setDebugFlag)(e)},enumerable:!1,configurable:!0}),e.prototype.init=function(e){var t,r,a;if(this.initialized)return!0;if(this.initialized=!0,"undefined"==typeof document)return!1;var s=(0,i.parseConfigElement)(document.getElementById("gta-main"));if(!e&&!s)return!1;"string"==typeof(e=g(g(g({},s),e),{providerConfig:g(g({},null==s?void 0:s.providerConfig),null==e?void 0:e.providerConfig),pluginConfig:g(g({},null==s?void 0:s.pluginConfig),null==e?void 0:e.pluginConfig)})).domain&&this.storage.setDomain(e.domain);var u=null!==(t=this.storage.get(i.CookieAbbr.preference))&&void 0!==t?t:{};if("boolean"==typeof e.dryRun&&(u[i.CookieAbbr.dryRun]=Number(e.dryRun)),this.storage.set(i.CookieAbbr.preference,u),"boolean"!=typeof e.dryRun&&"number"==typeof u[i.CookieAbbr.dryRun]&&(e.dryRun=Boolean(u[i.CookieAbbr.dryRun])),!0===e.dryRun&&(this.dryRun=!0),this.options=e,!this.dryRun){var c=function(t){if(Object.prototype.hasOwnProperty.call(e.providerConfig,t)){var r=(0,i.find)(o.a,(function(e){return e.providerName===t}));r&&l.registerProvider(r,e.providerConfig[t])}},l=this;for(var p in e.providerConfig)c(p)}for(var f=0;f<n.G.length;++f){var h=n.G[f],d=null===(r=e.pluginConfig)||void 0===r?void 0:r[h.pluginName];(null==d?void 0:d.disabled)||this.registerPlugin(h,null===(a=e.pluginConfig)||void 0===a?void 0:a[h.pluginName])}return!0},e.prototype.setUser=function(e,t,r){var n;try{if(!this.init(r))return!1;e||(e=this.storage.get(i.CookieAbbr.userKey)||(0,i.UUID)()),this.storage.set(i.CookieAbbr.userKey,e);for(var o=0;o<this.providers.length;++o){var a=this.providers[o],s=(0,i.formatUserFor)(a,t||{});null===(n=a.setUser)||void 0===n||n.call(a,e,s)}}catch(e){return d("GTA error when setUser: ",e),!1}return!0},e.prototype.registerProvider=function(e,t){var r=null;return t.account&&this.providers.push(r=new e(t)),r},e.prototype.registerPlugin=function(e,t){var r;return this.plugins.push(r=new e(this,t)),r},e.prototype.event=function(e){var t,r;try{if(e&&"object"==typeof e){for(var n=0;n<this.plugins.length;++n)if(this.plugins[n].onGTAEvent){var o=this.plugins[n].onGTAEvent(e);if(!o)return d("An event was filtered by plugin: "+this.plugins[n].name,e),this;e=o}for(d("GTA event: ",e),n=0;n<this.providers.length;++n)try{null===(r=(t=this.providers[n]).event)||void 0===r||r.call(t,e)}catch(e){d("error on gta provider: "+this.providers[n].name+", "+e)}}}catch(e){d("GTA error when event: ",e)}return this},e.prototype.pageview=function(){var e,t;try{for(var r=0;r<this.providers.length;++r)null===(t=(e=this.providers[r]).pageview)||void 0===t||t.call(e)}catch(e){d("GTA error when pageview: ",e)}},e.prototype.login=function(e,t){var r;try{this.storage.set(i.CookieAbbr.userKey,e);for(var n=0;n<this.providers.length;++n){var o=this.providers[n],a=(0,i.formatUserFor)(o,t||{});null===(r=o.login)||void 0===r||r.call(o,e,a)}}catch(e){d("GTA error when login: ",e)}},e.prototype.logout=function(e){var t,r;try{this.storage.destroy(),this.storage.set(i.CookieAbbr.userKey,(0,i.UUID)());for(var n=0;n<this.providers.length;++n)null===(r=(t=this.providers[n]).logout)||void 0===r||r.call(t,e)}catch(e){d("GTA error when logout: ",e)}},e.version=v,e}())},705:(e,t,r)=>{r.d(t,{G:()=>d});var n=r(593),o=r(593).DBGCALL,i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a="utmd",s=/utm_(\w+)=([^&]*)&?/gi,u=function(){function e(e){var t=this;this.gta=e,this.name=a,this.get=function(){return t.gta.storage.get(n.CookieAbbr.referral)||null},this.sweep=function(){t.gta.storage.delete(n.CookieAbbr.referral)};try{e.getUTM=this.get,e.sweepUTM=this.sweep;var r=0===(this.gta.storage.get(n.CookieAbbr.userKey)||"").indexOf(n.kUUIDRandPrefix),u=!!this.get();if(r&&!u){for(var c={},l=void 0;l=s.exec(window.location.search);){var p=i(l,3),f=p[1],h=p[2];c[f]=h}e.storage.set(n.CookieAbbr.utm,c)}}catch(e){o("GTA error in utmd",e)}}return e.pluginName=a,e}(),c=r(593).DBGCALL,l="referrald",p=function(){function e(e){var t=this;this.gta=e,this.name=l,this.get=function(){return t.gta.storage.get(n.CookieAbbr.referral)||null},this.sweep=function(){t.gta.storage.delete(n.CookieAbbr.referral)};try{e.getReferral=this.get,e.sweepReferral=this.sweep;var r=!!this.get(),o=0===(this.gta.storage.get(n.CookieAbbr.userKey)||"").indexOf(n.kUUIDRandPrefix);if(document.referrer&&o&&!r){var i=document.createElement("a");i.href=document.referrer;var a={domain:i.hostname.slice(0,50),path:i.pathname.slice(0,60),query:i.search.slice(0,20),hash:i.hash.slice(0,20)};e.storage.set(n.CookieAbbr.referral,a)}}catch(e){c("GTA error in referrald",e)}}return e.pluginName=l,e}(),f=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||function(){return!1}).call(e,t)},h="domevent",d=[function(){function e(e){var t=this;this.gta=e,this.name=h,this.onClick=function(e){setTimeout((function(){return t.handleEvent(e)}),0)},this.handleEvent=function(e){for(var r,o,i=e.target;i;){var a=null===(r=i.dataset)||void 0===r?void 0:r.gta,s=null===(o=i.dataset)||void 0===o?void 0:o.gtaIgnore,u=(0,n.parseGTA)(a||"");!u||s&&!f(i,s)||t.gta.event(u),i=i.parentElement}},(document.body||document).addEventListener("click",this.onClick,!0)}return e.pluginName=h,e}(),u,p]},773:(e,t,r)=>{r.d(t,{a:()=>p});var n=r(593),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i="aplus",a=function(){function e(e){this.name=i,this.userKey="",this.user={},this.host=e.host||"//gm.mmstat.com",this.goldKey=e.account}return e.prototype.setUser=function(e,t){this.userKey=e,this.user=t},e.prototype.enrichEvent=function(e){var t;return o(o({gmkey:"CLK",userKey:this.userKey,cache:""+Date.now(),mp_lib:"web",platform:"web",sys_current_url:null===(t=window.location)||void 0===t?void 0:t.href},this.user),e)},e.prototype.event=function(e){e=this.enrichEvent(e);var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r+"="+encodeURIComponent(e[r]));(0,n.imageGET)(""+this.host+this.goldKey+"?"+t.join("&").toLowerCase())},e.providerName=i,e}(),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u="tbpanel",c=function(){function e(e){this.name=u,this.userKey="",this.trackUrl=e.track||"gta.teambition.net/v1",/^((https?):)?\/\//.test(this.trackUrl)||(this.trackUrl="//"+this.trackUrl)}return e.prototype.setUser=function(e){this.userKey=e},e.prototype.event=function(e){var t=btoa(JSON.stringify({event:e.action,properties:s({userKey:this.userKey,distinct_id:this.userKey,event_name:e.action||"no-op"},e)}).toLowerCase());(0,n.xhrGET)(this.trackUrl+"/track/?data="+t+"&_="+Date.now())},e.providerName=u,e}(),l="google",p=[a,c,function(){function e(e){this.name=l;var t=e.account,r=e.scriptUrl;window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now();var o=(0,n.createScript)(r||"//www.google-analytics.com/analytics.js");(0,n.loadScript)(o,"ga"),window.ga("create",t,"auto"),window.ga("send","pageview")}return e.prototype.pageview=function(){if(window.ga){var e=Array.prototype.slice.call(arguments),t="object"==typeof e[0]?e[0]:e.join("_");window.ga("send","pageview",t)}},e.prototype.event=function(e){if(window.ga){var t=e.page,r=e.action,n=e.type;window.ga("send","event",t,r,n)}},e.providerName=l,e}()]},593:(e,t,r)=>{r.r(t),r.d(t,{removeNode:()=>u,createScript:()=>c,loadScript:()=>l,GTA_CHECK_REGEX:()=>p,GTA_PARSE_REGEX:()=>f,parseGTA:()=>h,formatUserFor:()=>d,parseConfigElement:()=>g,xhrGET:()=>v,imageGET:()=>y,kUUIDRandPrefix:()=>m,UUID:()=>b,find:()=>w,DEBUG_FLAG:()=>C,setDebugFlag:()=>P,DBGCALL:()=>k,CookieAbbr:()=>n});var n,o=r(705),i=r(773),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=function(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)},c=function(e,t){var r=document.createElement("script");return r.async=!0,r.src=e,t&&(r.id=t),r},l=function(e,t,r){void 0===r&&(r=!0),e.onerror=function(){t&&delete window[t],u(e)},e.onload=function(){r&&u(e)}},p=/^\s*\{(.*)\}\s*$/,f=/[\s"']*([^:,"']+)[\s"']*:[\s"']*([^:,"']+)[\s"']*,?/g,h=function(e){var t;if(!e)return null;var r,n=null===(t=p.exec(e))||void 0===t?void 0:t[1];if(!n||0===n.length)return null;for(var o={};r=f.exec(n);){var i=a(r,3),s=i[1],u=i[2];o[s]=u}return o},d=function(e,t){var r,n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=t[o];if(!i)continue;if(i.wlist&&!(e.name in i.wlist))continue;(null===(r=i.alias)||void 0===r?void 0:r[e.name])?n[i.alias[e.name]]=i.value:"[object Object]"===Object.prototype.toString.call(i)&&"value"in i?n[o]=i.value:n[o]=i}return n},g=function(e){if(!e)return null;for(var t=o.G.map((function(e){return e.pluginName})),r=i.a.map((function(e){return e.providerName})),n={pluginConfig:{},providerConfig:{}},s=e.attributes.length,u=0;u<s;++u){var c=e.attributes[u].name,l=e.attributes[u].value;"true"===l&&(l=!0),"false"===l&&(l=!1);var p=c.match(/data-(.*?)(?:-(.*?))?$/);if(p){var f=a(p,3),h=f[1],d=f[2];r.indexOf(h)>=0?(n.providerConfig[h]||(n.providerConfig[h]={account:""}),n.providerConfig[h][d||"account"]=l):t.indexOf(h)>=0&&d?(n.pluginConfig[h]||(n.pluginConfig[h]={}),n.pluginConfig[h][d]=l):n[h]=l}}return n},v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.send(),t},y=function(e){var t=document.createElement("img");return t.src=e,t},m="72616e64",b=function(){return m+"-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return((16*Math.random()|0)>>e/4).toString(16)}))},w=function(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n]))return e[n];return null},C=!1,P=function(e){C=e},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(C||window._gta_debug)&&console.info.apply(console,s(e))};!function(e){e.userKey="uk",e.userProperty="up",e.preference="pf",e.dryRun="dr",e.cookieDomain="cd",e.referral="r",e.utm="utm"}(n||(n={}))}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(947)})().default}));
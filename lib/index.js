!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Gta",[],t):"object"==typeof exports?exports.Gta=t():e.Gta=t()}(self,(function(){return(()=>{"use strict";var e={947:(e,t,r)=>{r.d(t,{default:()=>m});var n=r(598),o=r(340),i=r(593),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(){function e(e,t,r){void 0===t&&(t=5184e6),this.key=e,this.expires=t,this.cache={};var n=document.cookie.match(new RegExp(e+"=(.*?)(;|$)"));if(n)try{this.cache=JSON.parse(decodeURIComponent(n[1]))}catch(e){}this.domain=this.savedDomain||this.defaultDomain,this.setDomain(r||this.domain)}return e.prototype.set=function(e,t){this.cache[e]=t,this.commit()},e.prototype.get=function(e){return this.cache[e]},e.prototype.delete=function(e){delete this.cache[e],this.commit()},e.prototype.getDomain=function(){return this.domain},e.prototype.setDomain=function(e){var t;this.cache[i.CookieAbbr.preference]=a(a({},this.cache[i.CookieAbbr.preference]),((t={})[i.CookieAbbr.cookieDomain]=e,t)),this.domain!==e&&(this.destroy({flushCache:!1}),this.domain=e,this.commit())},Object.defineProperty(e.prototype,"savedDomain",{get:function(){var e,t,r=null===(t=null===(e=this.cache)||void 0===e?void 0:e[i.CookieAbbr.preference])||void 0===t?void 0:t[i.CookieAbbr.cookieDomain];return r&&"string"==typeof r?r:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultDomain",{get:function(){var e,t=location.hostname||"",r=null===(e=/[a-z0-9-]+\.[a-z0-9-]+$/i.exec(t))||void 0===e?void 0:e[0];return r?"."+r:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookieDomain",{get:function(){return this.domain?"domain="+this.domain+";":""},enumerable:!1,configurable:!0}),e.prototype.commit=function(){var e=encodeURIComponent(JSON.stringify(this.cache)),t=new Date(Date.now()+this.expires).toUTCString();document.cookie=this.key+"="+e+";expires="+t+";"+this.cookieDomain+"path=/"},e.prototype.destroy=function(e){var t;(null===(t=null==e?void 0:e.flushCache)||void 0===t||t)&&(this.cache={}),(0,i.deleteCookie)(this.key,this.domain)},e}(),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c="superproperty",l=function(){function e(e){var t,r=this;this.gta=e,this.name=c,this.runtimeProperties={},this.registerProperty=function(e,t){return r.runtimeProperties[e]=t,r},this.unregisterProperty=function(e){return delete r.runtimeProperties[e],r},this.registerPersistentProperty=function(e,t){r.persistentProperties[e]=t,r.gta.storage.set(i.CookieAbbr.userProperty,r.persistentProperties)},this.unregisterPersistentProperty=function(e){delete r.persistentProperties[e],r.gta.storage.set(i.CookieAbbr.userProperty,r.persistentProperties)},this.setCurrentPage=function(e){r.registerProperty("page",e)},e.setCurrentPage=this.setCurrentPage,e.registerProperty=this.registerProperty,e.unregisterProperty=this.unregisterProperty,e.registerPersistentProperty=this.registerPersistentProperty,e.unregisterPersistentProperty=this.unregisterPersistentProperty,this.persistentProperties=null!==(t=e.storage.get(i.CookieAbbr.userProperty))&&void 0!==t?t:{}}return e.prototype.onGTAEvent=function(e){return u(u(u({},this.persistentProperties),this.runtimeProperties),e)},e.pluginName=c,e}(),p=r(593).DBGCALL,f="duration",d=function(){function e(e){var t=this;this.gta=e,this.name=f,this.startTimeMap=new Map,this.durationStart=function(e){if(t.startTimeMap.has(e)){var r=t.startTimeMap.get(e);r.push(Date.now()),t.startTimeMap.set(e,r)}else t.startTimeMap.set(e,[Date.now()])},this.durationEnd=function(e,r,n){var o;if(t.startTimeMap.has(e)){var i=t.startTimeMap.get(e),a=void 0;r?(a=Date.now()-i.pop(),t.startTimeMap.delete(e)):n===+n?a=Date.now()-Number(i.splice(n,1)):(a=Date.now()-i[0],t.startTimeMap.delete(e)),p("time on "+e+" : "+a),t.gta.event(((o={gmkey:"EXP"})[e]=a,o))}else console.warn(e+" need use durationStart function")},this.gta.durationStart=this.durationStart,this.gta.durationEnd=this.durationEnd,window.addEventListener("unload",(function(){t.startTimeMap.forEach((function(e,r){t.durationEnd(r)}))}))}return e.pluginName=f,e}(),h=r(593).DBGCALL,g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v="2.0.0-alpha.14";const m=new(function(){function e(){this.version=v,this.dryRun=!1,this.initialized=!1,this.plugins=[],this.providers=[],this.options=null,this.storage=new s("TB_GTA",15552e6),this.registerPlugin(l,null),this.registerPlugin(d,null)}return Object.defineProperty(e.prototype,"debug",{get:function(){return i.DEBUG_FLAG},set:function(e){(0,i.setDebugFlag)(e)},enumerable:!1,configurable:!0}),e.prototype.init=function(e){var t,r,a;if(this.initialized)return!0;if(this.initialized=!0,"undefined"==typeof document)return!1;var s=(0,i.parseConfigElement)(document.getElementById("gta-main"));if(!e&&!s)return!1;"string"==typeof(e=g(g(g({},s),e),{providerConfig:g(g({},null==s?void 0:s.providerConfig),null==e?void 0:e.providerConfig),pluginConfig:g(g({},null==s?void 0:s.pluginConfig),null==e?void 0:e.pluginConfig)})).domain&&this.storage.setDomain(e.domain);var u=null!==(t=this.storage.get(i.CookieAbbr.preference))&&void 0!==t?t:{};if("boolean"==typeof e.dryRun&&(u[i.CookieAbbr.dryRun]=Number(e.dryRun)),this.storage.set(i.CookieAbbr.preference,u),"boolean"!=typeof e.dryRun&&"number"==typeof u[i.CookieAbbr.dryRun]&&(e.dryRun=Boolean(u[i.CookieAbbr.dryRun])),!0===e.dryRun&&(this.dryRun=!0),this.options=e,!this.dryRun){var c=function(t){if(Object.prototype.hasOwnProperty.call(e.providerConfig,t)){var r=(0,i.find)(o.a,(function(e){return e.providerName===t}));r&&l.registerProvider(r,e.providerConfig[t])}},l=this;for(var p in e.providerConfig)c(p)}for(var f=0;f<n.G.length;++f){var d=n.G[f],h=null===(r=e.pluginConfig)||void 0===r?void 0:r[d.pluginName];(null==h?void 0:h.disabled)||this.registerPlugin(d,null===(a=e.pluginConfig)||void 0===a?void 0:a[d.pluginName])}return!0},e.prototype.setUser=function(e,t,r){var n;try{if(!this.init(r))return!1;e||(e=this.storage.get(i.CookieAbbr.userKey)||(0,i.UUID)()),this.storage.set(i.CookieAbbr.userKey,e);for(var o=0;o<this.providers.length;++o){var a=this.providers[o],s=(0,i.formatUserFor)(a,t||{});null===(n=a.setUser)||void 0===n||n.call(a,e,s)}}catch(e){return h("GTA error when setUser: ",e),!1}return!0},e.prototype.registerProvider=function(e,t){var r=null;return t.account&&this.providers.push(r=new e(t)),r},e.prototype.registerPlugin=function(e,t){var r;return this.plugins.push(r=new e(this,t)),r},e.prototype.event=function(e){var t,r;try{if(e&&"object"==typeof e){for(var n=0;n<this.plugins.length;++n)if(this.plugins[n].onGTAEvent){var o=this.plugins[n].onGTAEvent(e);if(!o)return h("An event was filtered by plugin: "+this.plugins[n].name,e),this;e=o}for(h("GTA event: ",e),n=0;n<this.providers.length;++n)try{null===(r=(t=this.providers[n]).event)||void 0===r||r.call(t,e)}catch(e){h("error on gta provider: "+this.providers[n].name+", "+e)}}}catch(e){h("GTA error when event: ",e)}return this},e.prototype.pageview=function(){var e,t;try{for(var r=0;r<this.providers.length;++r)null===(t=(e=this.providers[r]).pageview)||void 0===t||t.call(e)}catch(e){h("GTA error when pageview: ",e)}},e.prototype.login=function(e,t){var r;try{var n=this.storage.get(i.CookieAbbr.userKey)||"";this.storage.set(i.CookieAbbr.userKey,e);for(var o=0;o<this.providers.length;++o){var a=this.providers[o],s=(0,i.formatUserFor)(a,t||{});null===(r=a.login)||void 0===r||r.call(a,e,s,{prevId:n})}}catch(e){h("GTA error when login: ",e)}},e.prototype.logout=function(e){var t,r;try{this.storage.destroy(),this.storage.set(i.CookieAbbr.userKey,(0,i.UUID)());for(var n=0;n<this.providers.length;++n)null===(r=(t=this.providers[n]).logout)||void 0===r||r.call(t,e)}catch(e){h("GTA error when logout: ",e)}},e.version=v,e}())},598:(e,t,r)=>{r.d(t,{G:()=>m});var n=r(593),o=r(593).DBGCALL,i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a="utmd",s=/utm_(\w+)=([^&]*)&?/gi,u=function(){function e(e){var t=this;this.gta=e,this.name=a,this.get=function(){return t.gta.storage.get(n.CookieAbbr.referral)||null},this.sweep=function(){t.gta.storage.delete(n.CookieAbbr.referral)};try{e.getUTM=this.get,e.sweepUTM=this.sweep;var r=0===(this.gta.storage.get(n.CookieAbbr.userKey)||"").indexOf(n.kUUIDRandPrefix),u=!!this.get();if(r&&!u){for(var c={},l=void 0;l=s.exec(window.location.search);){var p=i(l,3),f=p[1],d=p[2];c[f]=d}e.storage.set(n.CookieAbbr.utm,c)}}catch(e){o("GTA error in utmd",e)}}return e.pluginName=a,e}(),c=r(593).DBGCALL,l="referrald",p=function(){function e(e){var t=this;this.gta=e,this.name=l,this.get=function(){return t.gta.storage.get(n.CookieAbbr.referral)||null},this.sweep=function(){t.gta.storage.delete(n.CookieAbbr.referral)};try{e.getReferral=this.get,e.sweepReferral=this.sweep;var r=!!this.get(),o=0===(this.gta.storage.get(n.CookieAbbr.userKey)||"").indexOf(n.kUUIDRandPrefix);if(document.referrer&&o&&!r){var i=document.createElement("a");i.href=document.referrer;var a={domain:i.hostname.slice(0,50),path:i.pathname.slice(0,60),query:i.search.slice(0,20),hash:i.hash.slice(0,20)};e.storage.set(n.CookieAbbr.referral,a)}}catch(e){c("GTA error in referrald",e)}}return e.pluginName=l,e}(),f=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||function(){return!1}).call(e,t)},d="domevent",h=function(){function e(e){var t=this;this.gta=e,this.name=d,this.onClick=function(e){setTimeout((function(){return t.handleEvent(e)}),0)},this.handleEvent=function(e){for(var r,o,i=e.target;i;){var a=null===(r=i.dataset)||void 0===r?void 0:r.gta,s=null===(o=i.dataset)||void 0===o?void 0:o.gtaIgnore,u=(0,n.parseGTA)(a||"");!u||s&&!f(i,s)||t.gta.event(u),i=i.parentElement}},(document.body||document).addEventListener("click",this.onClick,!0)}return e.pluginName=d,e}(),g=r(593).DBGCALL,v="retire-tbpanel-cookie",m=[h,u,p,function(){function e(e){this.name=v,this.generateDomainList=function(){for(var e=location.hostname.split(".")||[],t=[];e.length>=2;){var r=e.join(".");t.push(r),t.push("."+r),e.shift()}return t};try{this.sweepTBPanelCookies()}catch(e){g("GTA error when retire tbpanel cookie: ",e)}}return e.prototype.sweepTBPanelCookies=function(){var e=document.cookie.split(";").map((function(e){var t;return null===(t=e.split("="))||void 0===t?void 0:t[0].trim()})).filter((function(e){return/^mp_tbpanel.*?$/.test(e)||/^mp_.*?_mixpanel$/.test(e)})),t=this.generateDomainList();e.forEach((function(e){(0,n.deleteCookie)(e),t.forEach((function(t){return(0,n.deleteCookie)(e,t)}))}))},e.pluginName=v,e}()]},340:(e,t,r)=>{r.d(t,{a:()=>h});var n=r(593),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i="aplus",a=function(){function e(e){this.name=i,this.userKey="",this.user={},this.host=e.host||"//gm.mmstat.com",this.goldKey=e.account}return e.prototype.setUser=function(e,t){this.userKey=e,this.user=t},e.prototype.enrichEvent=function(e){var t;return o(o({gmkey:"CLK",userKey:this.userKey,cache:""+Date.now(),mp_lib:"web",platform:"web",sys_current_url:null===(t=window.location)||void 0===t?void 0:t.href},this.user),e)},e.prototype.event=function(e){e=this.enrichEvent(e);var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r+"="+encodeURIComponent(e[r]));(0,n.imageGET)(""+this.host+this.goldKey+"?"+t.join("&").toLowerCase())},e.providerName=i,e}(),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u="tbpanel",c=function(){function e(e){this.name=u,this.userKey="",this.trackUrl=e.track||"gta.teambition.net/v1",/^((https?):)?\/\//.test(this.trackUrl)||(this.trackUrl="//"+this.trackUrl)}return e.prototype.setUser=function(e){this.userKey=e},e.prototype.event=function(e){var t=btoa(JSON.stringify({event:e.action,properties:s({mp_lib:"web",userKey:this.userKey,distinct_id:this.userKey,event_name:e.action||"no-op"},e)}).toLowerCase());(0,n.xhrGET)(this.trackUrl+"/track/?data="+t+"&_="+Date.now())},e.prototype.login=function(e,t,r){/[a-fA-F0-9]{24}/.test(r.prevId)||(0,n.xhrGET)(this.trackUrl+"/login?userkey="+e+"&distinct_id="+r.prevId)},e.providerName=u,e}(),l="google",p=function(){function e(e){this.name=l;var t=e.account,r=e.scriptUrl;window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now();var o=(0,n.createScript)(r||"//www.google-analytics.com/analytics.js");(0,n.loadScript)(o,"ga"),window.ga("create",t,"auto"),window.ga("send","pageview")}return e.prototype.pageview=function(){if(window.ga){var e=Array.prototype.slice.call(arguments),t="object"==typeof e[0]?e[0]:e.join("_");window.ga("send","pageview",t)}},e.prototype.event=function(e){if(window.ga){var t=e.page,r=e.action,n=e.type;window.ga("send","event",t,r,n)}},e.providerName=l,e}(),f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d="sensorsdata",h=[a,c,p,function(){function e(e){var t;this.name=d;var r=f(f(f({sdk_url:e.script||"//g.alicdn.com/teambition-fe/static-files/analytics/sensorsdata.min.js",name:"sa",server_url:e.account},e.heatmap?{heatmap:{scroll_notice_map:"not_collect"}}:{}),e.showlog?{}:{show_log:!1}),!1===e.isspa?{}:{is_track_single_page:!0});if(void 0===window.sensorsDataAnalytic201505){window.sensorsDataAnalytic201505=r.name,window[r.name]=window[r.name]||function(e){return function(){window[r.name]._q=window[r.name]._q||[],window[r.name]._q.push([e,arguments])}};for(var o=["track","quick","register","registerPage","registerOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","getAppStatus"],i=0;i<o.length;++i)window[r.name][o[i]]=window[r.name].call(null,o[i]);if(!window[r.name]._t){var a=(0,n.createScript)(r.sdk_url);window[r.name].para=r,(0,n.loadScript)(a,r.name)}null===(t=window.sa)||void 0===t||t.quick("autoTrack")}}return e.prototype.setUser=function(e,t){var r,n;/[a-fA-F0-9]{24}/.test(e)?(this.login(e),null===(r=window.sa)||void 0===r||r.setProfile(t)):null===(n=window.sa)||void 0===n||n.quick("isReady",(function(){window.sa.identify(e,!0)}))},e.prototype.event=function(e){var t,r={platform:"web"};for(var n in e)Object.prototype.hasOwnProperty.call(r,n)&&(r[(""+n).toLowerCase()]=e[n]);var o=(""+r.action).replace(/ /g,"_").replace(/[^A-Za-z0-9_\$]/g,"").toLowerCase();null===(t=window.sa)||void 0===t||t.track(o,r)},e.prototype.login=function(e){var t;null===(t=window.sa)||void 0===t||t.login(e)},e.prototype.logout=function(){var e;null===(e=window.sa)||void 0===e||e.logout()},e.providerName=d,e}()]},593:(e,t,r)=>{r.r(t),r.d(t,{removeNode:()=>u,createScript:()=>c,loadScript:()=>l,GTA_CHECK_REGEX:()=>p,GTA_PARSE_REGEX:()=>f,parseGTA:()=>d,formatUserFor:()=>h,parseConfigElement:()=>g,xhrGET:()=>v,imageGET:()=>m,kUUIDRandPrefix:()=>y,UUID:()=>w,isRandomID:()=>b,find:()=>C,deleteCookie:()=>k,DEBUG_FLAG:()=>P,setDebugFlag:()=>A,DBGCALL:()=>O,CookieAbbr:()=>n});var n,o=r(598),i=r(340),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=function(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)},c=function(e,t){var r=document.createElement("script");return r.async=!0,r.src=e,t&&(r.id=t),r},l=function(e,t,r){var n;void 0===r&&(r=!0),e.onerror=function(){t&&delete window[t],u(e)},e.onload=function(){r&&u(e)};var o=document.getElementsByTagName("script")[0];null===(n=null==o?void 0:o.parentNode)||void 0===n||n.insertBefore(e,o)},p=/^\s*\{(.*)\}\s*$/,f=/[\s"']*([^:,"']+)[\s"']*:[\s"']*([^:,"']+)[\s"']*,?/g,d=function(e){var t;if(!e)return null;var r,n=null===(t=p.exec(e))||void 0===t?void 0:t[1];if(!n||0===n.length)return null;for(var o={};r=f.exec(n);){var i=a(r,3),s=i[1],u=i[2];o[s]=u}return o},h=function(e,t){var r,n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=t[o];if(!i)continue;if(i.wlist&&!(e.name in i.wlist))continue;(null===(r=i.alias)||void 0===r?void 0:r[e.name])?n[i.alias[e.name]]=i.value:"[object Object]"===Object.prototype.toString.call(i)&&"value"in i?n[o]=i.value:n[o]=i}return n},g=function(e){if(!e)return null;for(var t=o.G.map((function(e){return e.pluginName})),r=i.a.map((function(e){return e.providerName})),n={pluginConfig:{},providerConfig:{}},s=e.attributes.length,u=0;u<s;++u){var c=e.attributes[u].name,l=e.attributes[u].value;"true"===l&&(l=!0),"false"===l&&(l=!1);var p=c.match(/data-(.*?)(?:-(.*?))?$/);if(p){var f=a(p,3),d=f[1],h=f[2];r.indexOf(d)>=0?(n.providerConfig[d]||(n.providerConfig[d]={account:""}),n.providerConfig[d][h||"account"]=l):t.indexOf(d)>=0&&h?(n.pluginConfig[d]||(n.pluginConfig[d]={}),n.pluginConfig[d][h]=l):n[d]=l}}return n},v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.send(),t},m=function(e){var t=document.createElement("img");return t.src=e,t},y="72616e64",w=function(){return y+"-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return((16*Math.random()|0)>>e/4).toString(16)}))},b=function(e){return 0===e.indexOf(y)},C=function(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n]))return e[n];return null},k=function(e,t){var r=t?"domain="+t+";":"";document.cookie=e+"=DELETED;expires=Thu, 01 Jan 1970 00:00:00 UTC;"+r+"path=/"},P=!1,A=function(e){P=e},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(P||window._gta_debug)&&console.info.apply(console,s(e))};!function(e){e.userKey="uk",e.userProperty="up",e.preference="pf",e.dryRun="dr",e.cookieDomain="cd",e.referral="r",e.utm="utm"}(n||(n={}))}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(947)})().default}));